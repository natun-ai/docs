<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/getting-started-ipynb">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Getting Started | Raptor</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://raptor.ml/docs/getting-started-ipynb"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="raptor-ml, raptor, ml, machine learning, feature store, operational model, mlops, productization, deployment, data science, data engineering, data pipeline, prediction, inference, concepts, model serving, tabular data, time series, kubernetes, research, feature engineering, feature selection, feature extraction, feature transformation, feature aggregation, feature generation, feature enrichment, feature validation, devops, data ops, data science ops, data engineering ops, data science platform, data engineering platform, feature engineering platform, online, real-time, batch, offline, scalability, sagemaker, feast, feathr, mlflow, kubeflow, docker, backend, production, production-ready"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Getting Started | Raptor"><meta data-rh="true" name="description" content="Build your first production-ready model in less than 5 minutes"><meta data-rh="true" property="og:description" content="Build your first production-ready model in less than 5 minutes"><link data-rh="true" rel="icon" href="/img/icon.svg"><link data-rh="true" rel="canonical" href="https://raptor.ml/docs/getting-started-ipynb"><link data-rh="true" rel="alternate" href="https://raptor.ml/docs/getting-started-ipynb" hreflang="en"><link data-rh="true" rel="alternate" href="https://raptor.ml/docs/getting-started-ipynb" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MPWPX5FK2F-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Raptor RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Raptor Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Raptor" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.f8f2f9cb.css">
<link rel="preload" href="/assets/js/runtime~main.bf62a5d1.js" as="script">
<link rel="preload" href="/assets/js/main.f23d99b8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_iHOr" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Raptor" class="themedImage_tS4Z themedImage--light_bnxf"><img src="/img/logo.svg" alt="Raptor" class="themedImage_tS4Z themedImage--dark_lziO"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/reference/how-does-raptor-work">Reference</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/community">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/raptor-ml/raptor" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_St7Q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_jCZ4 colorModeToggle_Up3A"><button class="clean-btn toggleButton_YkpQ toggleButtonDisabled_qgZS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_J1mK"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_pNV9"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_mpLA"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_sMK5 docsWrapper_QbyX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_q22d" type="button"></button><div class="docPage_lJCk"><aside class="theme-doc-sidebar-container docSidebarContainer_Fhqy"><div class="sidebarViewport_xkO1"><div class="sidebar_JkBi"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_tBnP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/getting-started-ipynb">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item concepts"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/concepts">Core Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/mindset">The production mindset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/basics">The basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/datasources">Data Sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/aggregations">Aggregations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/sourceless">Sourceless features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/derived">Derived feature (like &quot;join&quot;)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/models">Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/common">Common use-cases</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/devops-area">DevOps Area</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/community">Join the community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/raptor-ml/raptor" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_nlIk">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_St7Q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_YddP"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_feDt"><div class="docItemContainer_I9jI"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_ROLU" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_u0Uh"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting Started</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_sLX_ theme-doc-toc-mobile tocMobile_wmKW"><button type="button" class="clean-btn tocCollapsibleButton_BIku">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Getting Started</h1></header><div class="cell markdown" colab_type="text" id="view-in-github"><a href="https://colab.research.google.com/github/raptor-ml/docs/blob/master/docs/docs/getting-started.ipynb" target="_parent" rel="noopener noreferrer"><img loading="lazy" src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab" class="img_JYAJ"></a></div><div class="cell markdown" docusaurus_hide="true" id="BK8SRO9PQ5VS"></div><div class="cell markdown" id="olN5NKbsQlKB"><p>Using the LabSDK, data-scientists can build models(that can run on
production) directly from the notebook.</p><p>When you&#x27;re done, you can &quot;export&quot; your work, like any other production
asset. This way, you can <strong>focus on your model</strong>, while Raptor is taking
care of the production concerns.</p></div><div class="cell markdown" id="W8E2-YjxnEVt"><h2 class="anchor anchorWithStickyNavbar_jzRF" id="-getting-started">🧐 Getting started<a href="#-getting-started" class="hash-link" aria-label="Direct link to 🧐 Getting started" title="Direct link to 🧐 Getting started">​</a></h2><p>In this quickstart tutorial, we&#x27;ll build a model that predicts the
probability of closing a deal.</p><p>Our CRM allow us to track every email communication, and the history of
previous deals for each customer. We&#x27;ll use this data sources to predict
whether the customer is ready for closure or not.</p><p>To do that, we&#x27;re going to build a few features from the data:</p><ol><li><code>emails_10h</code> - the amount of email exchanges over the last 10 hours</li><li><code>question_marks_10h+avg</code> - the average amount of question marks in
the subject over the last 10 hours</li><li><code>deals_10h+sum</code> - the sum of the deals of the last 10 hours</li><li><code>emails_deals</code> - the rate between the emails in the last 10 hours
(<code>emails_10h</code>) and the avarage of the deals in the last 10 hours
(<code>deals_10h[avg]</code>)</li><li><code>diff_with_previous_amount</code> - the delta between the last amount and
the one before</li><li><code>last_amount</code> - our label</li></ol></div><div class="cell markdown" id="ZwsP6pk7ibxZ"><h2 class="anchor anchorWithStickyNavbar_jzRF" id="️-installing-the-sdk">⚡️ Installing the SDK<a href="#️-installing-the-sdk" class="hash-link" aria-label="Direct link to ⚡️ Installing the SDK" title="Direct link to ⚡️ Installing the SDK">​</a></h2><p>Yalla, let&#x27;s go! First, we install the LabSDK and import it.</p></div><div class="cell code" execution_count="1" id="a5eW89kWTdL5"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token plain">!pip install raptor</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">labsdk pyarrow </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">U </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">quiet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> raptor </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> datetime </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing_extensions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TypedDict</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell markdown" id="p88hB-owwk3-"><h2 class="anchor anchorWithStickyNavbar_jzRF" id="️-writing-our-first-features">✍️ Writing our first features<a href="#️-writing-our-first-features" class="hash-link" aria-label="Direct link to ✍️ Writing our first features" title="Direct link to ✍️ Writing our first features">​</a></h2><p>Our first feature is calculating how many emails an account got over the
last 10 hours.</p><p>To do that, we first define our data-sources, then we can start
transforming our data.</p></div><div class="cell code" execution_count="2" id="25sRcwoMwtR_"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@data_source</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    training_data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_parquet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://gist.github.com/AlmogBaku/8be77c2236836177b8e54fa8217411f2/raw/emails.parquet&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># This is the data as looks in production</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    keys</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timestamp</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;event_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    production_config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">StreamingConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kind</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;kafka&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># This optional, and will create the production data-source configuration for DevOps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Email</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TypedDict</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Email&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;from&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event_at</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    account_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell code" execution_count="3" id="aUqlADgYbcmr"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data_source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@aggregation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">function</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">AggregationFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> over</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;10h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> granularity</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1h&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">emails_10h</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">this_row</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;email over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell code" execution_count="4" id="xcHrGi2Nbmh4"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data_source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@aggregation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">function</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">AggregationFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Avg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> over</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;10h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> granularity</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1h&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">question_marks_10h</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">this_row</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;question marks over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> this_row</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;subject&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;?&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell markdown" id="1DiPXWqULKB7"><hr><blockquote><h2 class="anchor anchorWithStickyNavbar_jzRF" id="-cool-tip">😎 <em>Cool tip</em><a href="#-cool-tip" class="hash-link" aria-label="Direct link to -cool-tip" title="Direct link to -cool-tip">​</a></h2><p>You can use the <code>@runtime</code> decorator to specify packages you want to
install and use.</p><p><a href="https://raptor.ml/" target="_blank" rel="noopener noreferrer">Learn more on the docs »</a></p></blockquote></div><div class="cell markdown" id="PC6AOb9RxMau"><p>Let&#x27;s create another feature that calculates various aggregations
against the deal amount.</p></div><div class="cell code" execution_count="5" id="L0oPJvDgdKSY"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@data_source</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    training_data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://gist.githubusercontent.com/AlmogBaku/8be77c2236836177b8e54fa8217411f2/raw/deals.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    keys</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timestamp</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;event_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Deal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TypedDict</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event_at</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    account_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell code" execution_count="6" id="1xuZOPyayKHT"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data_source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Deal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@aggregation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AggregationFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Sum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AggregationFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Avg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AggregationFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Max</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AggregationFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Min</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    over</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;10h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    granularity</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1m&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deals_10h</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">this_row</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;sum/avg/min/max of deal amount over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> this_row</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;amount&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell markdown" id="Q1IADRr1yiIR"><p>Now we can create a <em>derived feature</em> that defines the rate between
these two features.</p><p><strong>💡Hint:</strong> Notice that when querying a feature with aggregation, we
need to specify the feature with the aggregation feature we want using
the feature selector.</p></div><div class="cell code" execution_count="7" id="WOmMn2bxynMp"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sourceless_markers_df</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Deal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">raptor_spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">local_df</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@freshness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_age</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;-1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_stale</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;-1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">emails_deals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;emails/deal[avg] rate over 10 hours&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    e</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;emails_10h+count&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;deals_10h+avg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> e </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> e </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> d</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell markdown" id="bxY7Vod0dht9"><p>Finally, we&#x27;ll create <code>last_amount</code> which will reserve one previous
value. We&#x27;ll use this feature as our label, and to calculte the delta
between the previous amount.</p></div><div class="cell code" execution_count="8" id="7XEUpCv_d1iS"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data_source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Deal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@freshness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_age</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_stale</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;2h&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@keep_previous</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">versions</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> over</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1h&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">last_amount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">this_row</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> this_row</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;amount&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell code" execution_count="9" id="Dp1PzC9Xd27X"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sourceless_markers_df</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Deal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">raptor_spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">local_df</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@freshness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_age</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_stale</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;2h&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">diff_with_previous_amount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">this_row</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_feature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;last_amount@-1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> lv </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> this_row</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;amount&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> lv</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell markdown" id="Lpfe-PHWqAVY"><h2 class="anchor anchorWithStickyNavbar_jzRF" id="-training-our-model">🧠 Training our model<a href="#-training-our-model" class="hash-link" aria-label="Direct link to 🧠 Training our model" title="Direct link to 🧠 Training our model">​</a></h2><p>After we defined our features, and wrote our feature engineering code,
we can start and train our model.</p></div><div class="cell code" execution_count="10" id="tNeaKZGMErJ4"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    keys</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;account_id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input_features</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;emails_10h+count&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;deals_10h+sum&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> emails_deals</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> diff_with_previous_amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;question_marks_10h+avg&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input_labels</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">last_amount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model_framework</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;sklearn&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model_server</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;sagemaker-ack&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@freshness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_age</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_stale</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;100h&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deal_prediction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TrainingContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> xgboost </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> XGBClassifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sklearn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model_selection </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> train_test_split</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">features_and_labels</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">input_features</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">input_labels</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Split the data into training and testing sets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X_train</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> X_test</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y_train</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y_test </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> train_test_split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> test_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> random_state</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Initialize an XGBoost model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xgb_model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> XGBClassifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Fit the model to the training data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xgb_model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X_train</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y_train</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ravel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> xgb_model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deal_prediction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">export</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="cell markdown" id="GO99n3tCpC2y"><h2 class="anchor anchorWithStickyNavbar_jzRF" id="️-deployment">☁️ Deployment<a href="#️-deployment" class="hash-link" aria-label="Direct link to ☁️ Deployment" title="Direct link to ☁️ Deployment">​</a></h2><p>Your&#x27;e officially done! 🎉</p><p>To deploy your model, instruct your DevOps team to deploy it using the
existing CI/CD using the generated <code>Makefile</code> in the <code>out</code> dir (or
manually using <code>kubectl</code>).</p></div><div class="cell code" execution_count="12" colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}" id="8ESVUlESq3QC" outputid="61762a30-5ef9-423d-bff9-54dd8f44d617"><div class="language-python codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-python codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token plain">!make </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">C out</span><span class="token operator" style="color:#393A34">/</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="output stream stdout"><div class="codeBlockContainer_OKN8 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qGSU"><pre tabindex="0" class="prism-code language-text codeBlock_P6_l thin-scrollbar"><code class="codeBlockLines_RGFn"><span class="token-line" style="color:#393A34"><span class="token plain">                    █▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  █▀  █▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">▄               ██▀ ▄█▀  ▄</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> █▄▄           ██▀ ▄█▀ ▄█▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ▀▀██████████▄ █ ▄▄█▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    █▄        ███ █▀                                 ▄</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ███      ███ ▀                                ▂▄██</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ███     ████     ▄██▀▀▀████   ██ ▄█▀▀▀▀█▄    ▀███▀▀▀▀   ▄███▀▀▀███▄   █ ▄█▀▀▀▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ███████████▎   ▄██▀     ▀██   ██▀      ▀██▄   ███      ███       ██▌  ██▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ███     ▀███   ██▌      ▄██   ██▌       ██▀   ██       ██        ██   ██</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ███      ▐██▄  ▀██▄   ▄▀███   ███     ▄██▀    ███       ███     ██    █▌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ███       ███▄   ▀▀██▀▀  ██   ███▀▀▀▀▀▀       ▀███▀       ▀████▀      █</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  ██▌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  █▀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  make &lt;target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">General</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  help             Display this help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Helpers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  show-envs        Show all environment variables that are available for configuring the generated YAML manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  all              Build docker images for all models, push them to the docker repository and deploy all data-sources, features and models to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy           Deploy all data-sources, features and models to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  all-ecr          Build docker images for all models, create ECR repos if not exists, push the images to the docker repository and deploy all data-sources, features and models to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-ecr       Deploy all data-sources, features and models to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Data Sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-dsrcs     Deploy all data-sources to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-dsrc-default-email  Deploy default.email to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-dsrc-default-deal  Deploy default.deal to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Features</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-features  Deploy all features to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-feat-default-emails_10h  Deploy default.emails_10h to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-feat-default-deals_10h  Deploy default.deals_10h to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-feat-default-emails_deals  Deploy default.emails_deals to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-feat-default-diff_with_previous_amount  Deploy default.diff_with_previous_amount to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-feat-default-question_marks_10h  Deploy default.question_marks_10h to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Models (All)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-models    Deploy all models to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker-build-models  Build docker images for all models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker-push-models  Push docker images for all models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  create-model-ecr-repos  Create ECR repositories for all models if they don&#x27;t exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker-ecr-push-models  Push docker images for all models to ECR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-ecr-models  Deploy all models to Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Models.PHONY: create-model-ecr-repo-default-deal_prediction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  create-model-ecr-repo-default-deal_prediction  Create ECR repository for default.deal_prediction if it doesn&#x27;t exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker-ecr-push-model-default-deal_prediction  Push docker image for default.deal_prediction to ECR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-ecr-model-default-deal_prediction  Deploy default.deal_prediction to ECR.PHONY: docker-build-model-default-deal_prediction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker-build-model-default-deal_prediction  Build docker image for default.deal_prediction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker-push-model-default-deal_prediction  Push default.deal_prediction docker image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-model-default-deal_prediction  Deploy default.deal_prediction to Kubernetes</span><br></span></code></pre><div class="buttonGroup_jSlw"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_OKyP" aria-hidden="true"><svg class="copyButtonIcon_JUqq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_qxs2" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><div class="cell markdown" id="i8UXJLnwo9jC"><h2 class="anchor anchorWithStickyNavbar_jzRF" id="-ta-dam">🪄 Ta-dam!<a href="#-ta-dam" class="hash-link" aria-label="Direct link to 🪄 Ta-dam!" title="Direct link to 🪄 Ta-dam!">​</a></h2><p><strong>From now on</strong>, you&#x27;ll have features and models running in production
and record the values for historical purposes (so you&#x27;ll be able to
retrain against the production data).</p><p><a href="https://raptor.ml" target="_blank" rel="noopener noreferrer"><strong>🔗 Learn more about what else you can do with Raptor at the official
docs</strong></a></p></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/raptor-ml/docs/tree/master/docs/docs/getting-started-ipynb.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Sdji" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated__hqV"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Core Concepts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_RLt7 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-getting-started" class="table-of-contents__link toc-highlight">🧐 Getting started</a></li><li><a href="#️-installing-the-sdk" class="table-of-contents__link toc-highlight">⚡️ Installing the SDK</a></li><li><a href="#️-writing-our-first-features" class="table-of-contents__link toc-highlight">✍️ Writing our first features</a></li><li><a href="#-training-our-model" class="table-of-contents__link toc-highlight">🧠 Training our model</a></li><li><a href="#️-deployment" class="table-of-contents__link toc-highlight">☁️ Deployment</a></li><li><a href="#-ta-dam" class="table-of-contents__link toc-highlight">🪄 Ta-dam!</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started-ipynb">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Core concepts</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reference</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/reference/how-does-raptor-work">Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/reference/labsdk/decorators">LabSDK decorators</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community">Slack community</a></li><li class="footer__item"><a href="https://twitter.com/RaptorML" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_St7Q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/raptor-ml/raptor" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_St7Q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.svg" alt="Raptor" class="themedImage_tS4Z themedImage--light_bnxf footer__logo" height="80"><img src="/img/logo.svg" alt="Raptor" class="themedImage_tS4Z themedImage--dark_lziO footer__logo" height="80"></div><div class="footer__copyright">Copyright © 2023 Raptor.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bf62a5d1.js"></script>
<script src="/assets/js/main.f23d99b8.js"></script>
</body>
</html>